{% extends 'hr/employee/employee_base.html' %} 
{% block title %}Employee - Attendance Records{% endblock %}

{% block content %}
<main class="content-wrap">
  <header class="content-head">
    <h1>Attendance Records</h1>
  </header>

 

  <!-- Filter Form -->
  <div class="search-box">
    <form method="get" class="filter-form">
      <div class="fields">
        <div class="input-field">
          <label>Date</label>
          <input type="date" id="date" name="date" value="{{ date_filter }}">
        </div>

        <div class="input-field">
          <label>&nbsp;</label>
          <button type="submit" class="submit">
            <span class="btnText">Filter</span>
            <i class="uil uil-filter"></i>
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- Attendance Table -->
  <div class="table-container">
    <table class="responsive-table">
      <caption><b>Attendance List</b></caption>
      <thead>
        <tr>
          <th>Date</th>
          <th>Time In</th>
          <th>Time Out</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for att in attendances.items %}
        <tr>
          <td data-label="Date">{{ att.date.strftime('%Y-%m-%d') }}</td>
          <td data-label="Time In">{{ att.time_in.strftime('%H:%M') if att.time_in else '---' }}</td>
          <td data-label="Time Out">{{ att.time_out.strftime('%H:%M') if att.time_out else '---' }}</td>
          <td data-label="Status" style="color: 
              {% if att.status == 'Present' %}green
              {% elif att.status == 'Late' %}orange
              {% else %}red{% endif %};">
            {{ att.status }}
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4">No attendance records found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="pagination">
      {% if attendances.has_prev %}
        <a href="{{ url_for('employee.attendance', page=attendances.prev_num, date=date_filter) }}">Previous</a>
      {% endif %}

      Page {{ attendances.page }} of {{ attendances.pages }}

      {% if attendances.has_next %}
        <a href="{{ url_for('employee.attendance', page=attendances.next_num, date=date_filter) }}">Next</a>
      {% endif %}
    </div>
  </div>
</main>
{% endblock %}
