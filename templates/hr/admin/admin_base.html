<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}HR Admin | GovHRPay{% endblock %}</title>

    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('hr_admin.static', filename='img/favicon.avif') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4k5z6T7F5d5Yd3yR3K4pA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-900 text-gray-100 flex flex-col md:flex-row min-h-screen font-sans">

    <!-- Mobile Navbar -->
    <header class="md:hidden bg-blue-800 text-white flex justify-between items-center p-4 shadow-md sticky top-0 z-20">
      <div class="flex items-center gap-2">
        <button id="mobileMenuBtn" class="text-white focus:outline-none">
          <i class="fa-solid fa-bars text-2xl"></i>
        </button>
        <h1 class="font-semibold text-lg">GovHRPay</h1>
      </div>
      <button id="logoutBtnMobile" class="text-white">
        <i class="fa-solid fa-right-from-bracket"></i>
      </button>
    </header>

    <!-- Sidebar -->
    <aside
      id="sidebar"
      class="bg-gray-950 text-white w-64 sm:w-72 flex-shrink-0 fixed md:static inset-y-0 left-0 transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-30 flex flex-col justify-between border-r border-gray-800 shadow-xl"
    >
      <div class="overflow-y-auto flex-grow">
        <!-- Logo -->
        <div class="flex items-center gap-3 px-6 py-5 border-b border-gray-800 sticky top-0 bg-gray-950 z-10">
          <img
            src="{{ url_for('hr_admin.static', filename='img/logo2.avif') }}"
            alt="Logo"
            class="w-12 h-12 rounded-full object-cover"
          />
          <div>
            <h2 class="text-lg font-semibold text-blue-400">GovHRPay</h2>
            <p class="text-sm text-gray-400">HR Admin</p>
            <p class="text-sm text-gray-300 mt-1">
              Welcome! <span class="font-medium">{{ current_user.get_full_name() }}</span>
            </p>
          </div>
        </div>

        <!-- Navigation -->
        <nav class="mt-4 px-4 text-gray-300">
          {% for section, links in {
            "Employee Management": [
              ("fa-gauge", "Dashboard", "hr_admin.hr_dashboard"),
              ("fa-users", "Employee Management", "hr_admin.view_employees"),
              ("fa-user-gear", "Account Management", "hr_admin.view_users")
            ],
            "Attendance & Leave": [
              ("fa-calendar-check", "View Attendance", "hr_admin.attendance"),
              ("fa-user-clock", "Add Attendance", "hr_admin.add_attendance"),
              ("fa-calendar-days", "View Leaves", "hr_admin.view_leaves")
            ],
            "Departments": [
              ("fa-building", "View Departments", "hr_admin.view_departments"),
              ("fa-plus", "Add Department", "hr_admin.add_department")
            ],
            "Positions": [
              ("fa-id-card", "View Positions", "hr_admin.view_positions"),
              ("fa-user-plus", "Add Position", "hr_admin.add_position")
            ],
            "Reports & Settings": [
              ("fa-file-chart-column", "Attendance Reports", "hr_admin.attendance_report"),
              ("fa-file-chart-line", "Leave Reports", "hr_admin.leave_report"),
              ("fa-gear", "Account Settings", "hr_admin.profile")
            ]
          }.items() %}
          <div class="mb-6">
            <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">{{ section }}</h3>
            <ul class="space-y-2">
              {% for icon, text, url in links %}
              <li>
                <a href="{{ url_for(url) }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fa-solid {{ icon }} text-blue-400 w-5"></i> {{ text }}
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
          {% endfor %}
        </nav>


      </div>

      <!-- Logout -->
      <div class="p-4 border-t border-gray-800">
        <button
          id="logoutBtn"
          class="flex items-center gap-2 w-full justify-center py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition"
        >
          <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
      </div>
    </aside>

    <!-- Overlay (for mobile) -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>

    <!-- Main Content -->
    <main class="flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto bg-gray-900">
      <div class="bg-blue-800 text-white rounded-lg p-4 mb-6 flex flex-wrap gap-3 items-center justify-between shadow-md sticky top-0 z-10 hidden md:flex">
        <div class="flex items-center gap-3">
          <i class="fa-solid fa-user-tie text-xl"></i>
          <h1 class="text-lg font-semibold">Human Resource Management System</h1>
        </div>
      </div>

      {% block content %}{% endblock %}
    </main>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");

      mobileMenuBtn?.addEventListener("click", () => {
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      });

      overlay?.addEventListener("click", () => {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
      });

      document.getElementById("logoutBtn")?.addEventListener("click", confirmLogout);
      document.getElementById("logoutBtnMobile")?.addEventListener("click", confirmLogout);

      function confirmLogout(e) {
        e.preventDefault();
        Swal.fire({
          title: "Are you sure?",
          text: "You will be logged out.",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, logout!",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "{{ url_for('hr_auth.logout') }}";a
          }
        });
      }
    </script>
  </body>
</html>
