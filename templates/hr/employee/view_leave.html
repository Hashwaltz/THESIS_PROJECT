{% extends 'hr/employee/employee_base.html' %}

{% block title %}View Leave{% endblock %}

{% block content %}
<div class="department-container" style="max-width:600px; margin:auto;">
  <header>Leave Details</header>

  <div class="fields" style="margin-top:20px;">
    <!-- Employee Name -->
    <div class="input-field" style="width:100%;">
      <label>Employee Name</label>
      <input type="text" value="{{ employee.get_full_name() }}" readonly>
    </div>

    <!-- Leave Type -->
    <div class="input-field" style="width:100%;">
      <label>Leave Type</label>
      <input type="text" value="{{ leave.leave_type.name }}" readonly>
    </div>

    <!-- Start Date -->
    <div class="input-field">
      <label>Start Date</label>
      <input type="date" value="{{ leave.start_date }}" readonly>
    </div>

    <!-- End Date -->
    <div class="input-field">
      <label>End Date</label>
      <input type="date" value="{{ leave.end_date }}" readonly>
    </div>

    <!-- Days Requested -->
    <div class="input-field">
      <label>Days Requested</label>
      <input type="text" value="{{ leave.days_requested }}" readonly>
    </div>

    <!-- Reason -->
    <div class="input-field" style="width:100%;">
      <label>Reason</label>
      <textarea rows="4" readonly>{{ leave.reason }}</textarea>
    </div>

    <!-- Status -->
    <div class="input-field" style="width:100%;">
      <label>Status</label>
      {% set status_color = {
        'Pending': '#f0ad4e',
        'Approved': '#5cb85c',
        'Rejected': '#d9534f'
      } %}
      <input type="text" value="{{ leave.status }}" readonly style="color:#fff; background-color: {{ status_color.get(leave.status, '#6c757d') }}; text-align:center; font-weight:bold;">
    </div>

    <!-- Comments (if any) -->
    {% if leave.comments %}
    <div class="input-field" style="width:100%;">
      <label>Comments</label>
      <textarea rows="3" readonly>{{ leave.comments }}</textarea>
    </div>
    {% endif %}

    <!-- Approved By & Date -->
    {% if leave.approved_by %}
    <div class="input-field" style="width:100%;">
      <label>Approved By</label>
      <input type="text" value="{{ leave.approver.get_full_name() }}" readonly>
    </div>

    <div class="input-field">
      <label>Approved At</label>
      <input type="text" value="{{ leave.approved_at.strftime('%Y-%m-%d %I:%M %p') }}" readonly>
    </div>
    {% endif %}
  </div>

  <!-- Back Button -->
  <div class="buttons">
    <a href="{{ url_for('employee_bp.leaves') }}" class="backBtn" style="text-decoration:none;">
      <button type="button"><i class="material-icons">arrow_back</i>Back</button>
    </a>
  </div>
</div>
{% endblock %}
