{% extends 'payroll/admin/payroll_admin_base.html' %}
{% block title %}Employee Earnings Report{% endblock %}

{% block content %}
<main class="content-wrap">
  <header class="content-head">
    <h1><b>Employee Earnings Report</b></h1>
  </header>

  <form method="get" class="searching" action="{{ url_for('payroll_admin.earnings_report') }}">
    <label>Type:</label>
    <select name="type">
      <option value="monthly" {% if report_type == 'monthly' %}selected{% endif %}>Monthly</option>
      <option value="annual" {% if report_type == 'annual' %}selected{% endif %}>Annual</option>
    </select>

    <label>Year:</label>
    <input type="number" name="year" value="{{ year }}" min="2000" max="2100" />

    <label>Month:</label>
    <input type="number" name="month" value="{{ month }}" min="1" max="12" />

    <button type="submit" class="btn">Generate</button>
  </form>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Employee</th>
          <th>Monthly Salary (₱)</th>
          <th>Total Hours Worked</th>
          <th>Total Earnings (₱)</th>
        </tr>
      </thead>
      <tbody>
        {% for r in reports %}
        <tr>
          <td>{{ r.first_name }} {{ r.last_name }}</td>
          <td>₱{{ "{:,.2f}".format(r.salary or 0) }}</td>
          <td>{{ "%.2f"|format(r.total_hours or 0) }}</td>
          <td><b>₱{{ "{:,.2f}".format(r.total_earnings or 0) }}</b></td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4" class="text-center">No records found</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</main>
{% endblock %}
